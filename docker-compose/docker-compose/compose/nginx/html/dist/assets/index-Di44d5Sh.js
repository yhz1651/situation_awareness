import{g as e,b as t,c as n,m as r,T as l,r as a,d as o,e as s,f as i,h as c,i as d,k as m,A as u,_ as A,u as g,j as h}from"./index-BHzTjgdo.js";import{b as p}from"./assessment-B8y50_jM.js";import{W as y,C as f,s as b,B as x}from"./request-BdSZPrdh.js";import{F as C,I as v,R as j,C as k}from"./index-DbH9RyqW.js";import{u as S,M as E}from"./index-DJDkQNUc.js";import{T as N,d as w}from"./situation-DgN_xpIM.js";import{S as I}from"./index-CTlTgMjl.js";const B=e=>{const{lineWidth:t,fontSizeIcon:l,calc:a}=e,o=e.fontSizeSM;return r(e,{tagFontSize:o,tagLineHeight:n(a(e.lineHeightSM).mul(o).equal()),tagIconSize:a(l).sub(a(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},F=e=>({defaultBg:new l(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),T=e("Tag",(e=>(e=>{const{paddingXXS:r,lineWidth:l,tagPaddingHorizontal:a,componentCls:o,calc:s}=e,i=s(a).sub(l).equal(),c=s(r).sub(l).equal();return{[o]:Object.assign(Object.assign({},t(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${n(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:c,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(B(e))),F);var V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]])}return n};const O=a.forwardRef(((e,t)=>{const{prefixCls:n,style:r,className:l,checked:i,onChange:c,onClick:d}=e,m=V(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:u,tag:A}=a.useContext(o),g=u("tag",n),[h,p,y]=T(g),f=s(g,`${g}-checkable`,{[`${g}-checkable-checked`]:i},null==A?void 0:A.className,l,p,y);return h(a.createElement("span",Object.assign({},m,{ref:t,style:Object.assign(Object.assign({},r),null==A?void 0:A.style),className:f,onClick:e=>{null==c||c(!i),null==d||d(e)}})))})),q=i(["Tag","preset"],(e=>(e=>c(e,((t,n)=>{let{textColor:r,lightBorderColor:l,lightColor:a,darkColor:o}=n;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:a,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:o,borderColor:o},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(B(e))),F);const P=(e,t,n)=>{const r="string"!=typeof(l=n)?l:l.charAt(0).toUpperCase()+l.slice(1);var l;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},M=i(["Tag","status"],(e=>{const t=B(e);return[P(t,"success","Success"),P(t,"processing","Info"),P(t,"error","Error"),P(t,"warning","Warning")]}),F);const $=(e,t)=>{const{prefixCls:n,className:r,rootClassName:l,style:i,children:c,icon:u,color:A,onClose:g,closeIcon:h,closable:p,bordered:b=!0}=e,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]])}return n}(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:C,direction:v,tag:j}=a.useContext(o),[k,E]=a.useState(!0);a.useEffect((()=>{"visible"in x&&E(x.visible)}),[x.visible]);const N=d(A),w=m(A),I=N||w,B=Object.assign(Object.assign({backgroundColor:A&&!I?A:void 0},null==j?void 0:j.style),i),F=C("tag",n),[V,O,P]=T(F),$=s(F,null==j?void 0:j.className,{[`${F}-${A}`]:I,[`${F}-has-color`]:A&&!I,[`${F}-hidden`]:!k,[`${F}-rtl`]:"rtl"===v,[`${F}-borderless`]:!b},r,l,O,P),K=e=>{e.stopPropagation(),null==g||g(e),e.defaultPrevented||E(!1)},[,Y]=S(p,null!=h?h:null==j?void 0:j.closeIcon,(e=>null===e?a.createElement(f,{className:`${F}-close-icon`,onClick:K}):a.createElement("span",{className:`${F}-close-icon`,onClick:K},e)),null,!1),z="function"==typeof x.onClick||c&&"a"===c.type,U=u||null,Q=U?a.createElement(a.Fragment,null,U,c&&a.createElement("span",null,c)):c,_=a.createElement("span",Object.assign({},x,{ref:t,className:$,style:B}),Q,Y,N&&a.createElement(q,{key:"preset",prefixCls:F}),w&&a.createElement(M,{key:"status",prefixCls:F}));return V(z?a.createElement(y,{component:"Tag"},_):_)},K=a.forwardRef($);K.CheckableTag=O;const Y=K;const z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 476H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"line",theme:"outlined"};var U=function(e,t){return a.createElement(u,A({},e,{ref:t,icon:z}))};const Q=a.forwardRef(U),_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAC6ADAAQAAAABAAAAEAAAAACWjvyVAAABPElEQVQoFX1SPUvEQBDd2ZjzBCshmuwlIFgeWNtZyCmCP+B+gcXV/gob/QG29wPERrE6xNrquNYmX0oaiwviJevbM7vsBc6Fybx57+0ws4TyMDyspRxTXd8vOL8J47hg/50kCC5TISQiy4UYrPOSFjIhniRjp6hLKeWZSNMXrenMNWBE1w3eIqLxh+dtG60BxrwXxxNw84aPKte9WmvGPAvEm2UYTfv9jlUz07khPy3R2ymKE6teNWOxL1skx1ELm7PSGYt9GwUAl4/smhIhXjHrfkPuIm/YBuAcUeFZ3yn1/WPG+TMIt2Wyyx9W1wMeZNkEnUe20sZKV77lzH6S3GHe27ZJ1YpX+hJrA2Zysl7vAVudaw75EcYLdK4UZ15DEZ2yHIKbKQFnttntDrXxj2p98yg6wN83VbklsV/y2F8Me6/oNwAAAABJRU5ErkJggg==",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAC6ADAAQAAAABAAAAEAAAAACWjvyVAAABTElEQVQoFWNkQAPsR+OVmf/93fSXidnvp/XCu8jSTMgcoRPRfECFm4FiWiBacHcoP7I8QvGqUOYfvxlXAiU1oQo0f3Kwr2AAisM0wBVzS3D0AAU9YBJQ2gMqDuYygkiuQzEpDIwMs6EKMKn/DKnf7JbMYeQ4FGvPxPh/N1AFK6YquMjvf//+ubAAFbYBhV5DhcWANAtcCYTxEkj9Y2Jiagc7AybJdTh2FgPD/1QYH0if+Ga7xBLGh3sQIvCfHSYBooEmnUTmoypm/I8Srv8ZGXfhVvyfURRJ8s23TwJ7kfgMCJP3O4A8ZgCX/M8wncFr8k84H8iAK+ZmlrYH8rmgkk++/f3ZhawQxIYr/s/AWAaV/PGPkSGKwXH1F6yKgUGWBvS6G1DyJSMjg98PmyWH0RWC+IzcB6N1/zMxLgMyNzKzMfZ/Nl/0FptCkBgA22NWLUncTosAAAAASUVORK5CYII=";function D(){const[e,t]=a.useState(""),[n,r]=a.useState(!1),[l,o]=a.useState([]),[s,i]=a.useState([]),[c,d]=a.useState([]),[m,u]=a.useState([0]),[A,g]=a.useState([]),[h,y]=a.useState([]),[f,x]=a.useState(0);return a.useEffect((()=>{(async()=>{if(r(!0),e)try{const{data:t}=await p({file_name:e}),n=t;o(n),y(n[0].entities);const l=[],a=[];let s=n[0].entities;for(let e=0;e<n.length;e++)n[e].entities.length>s.length&&(s=n[e].entities);for(let e=0;e<s.length;e++)a.push([{name:s[e].name,enemy:s[e].enemy,environment:s[e].environment,policy:s[e].policy,temperature:s[e].temperature,coordinates:[s[e].location.longitude,s[e].location.latitude],longitude:s[e].location.longitude}]),l.push([{name:s[e].name,enemy:s[e].enemy,environment:s[e].environment,policy:s[e].policy,temperature:s[e].temperature,coordinates:[s[e].location.longitude,s[e].location.latitude],longitude:s[e].location.longitude}]);for(let e=0;e<n.length;e++){const t=n[e].entities;for(let e=0;e<t.length;e++)for(let n=0;n<a.length;n++)t[e].name===a[n][0].name&&(a[n].push({name:t[e].name,enemy:t[e].enemy,environment:t[e].environment,policy:t[e].policy,temperature:t[e].temperature,coordinates:[t[e].location.longitude,t[e].location.latitude],longitude:t[e].location.longitude}),l[n].push({name:t[e].name,enemy:t[e].enemy,environment:t[e].environment,policy:t[e].policy,temperature:t[e].temperature,coordinates:[t[e].location.longitude,t[e].location.latitude],longitude:t[e].location.longitude}))}for(let e=0;e<a.length;e++)a[e].shift(),l[e].shift();d(a),i(l);let c=[l[0]];g(c),r(!1)}catch(t){r(!1),b.error("态势文件获取失败")}})()}),[e]),{loading:n,fileData:l,coordinates:s,entityData:c,entityIndex:m,currentEntity:A,setLoading:r,setEntityIndex:u,setCurrentEntity:g,setTaishiNmame:t,taishiNmame:e,currentTimeEntity:h,setCurrentTimeEntity:y,setCurrentTimeIndex:x,currentTimeIndex:f}}function W({fileData:e,situation:t}){const n=g(),[r]=C.useForm(),[l,o]=a.useState(!1),s=[{title:"位置监管",formItmeList:[{label:"经度",name:"wzlongitude",rules:[{required:!0,message:"请输入经度"}],getValueProps:e=>parseFloat(e),getValueFromEvent:e=>parseFloat(e)},{label:"纬度",name:"wzlatitude",rules:[{required:!0,message:"请输入纬度"}]},{label:"距离",name:"radius",rules:[{required:!0,message:"请输入距离"}]}]},{title:"区域监管",formItmeList:[{label:"经度",name:"qylongitude",rules:[{required:!0,message:"请输入经度"}]},{label:"纬度",name:"qylatitude",rules:[{required:!0,message:"请输入纬度"}]},{label:"温度阈值",name:"temperature_threshold",rules:[{required:!0,message:"请输入温度阈值"}]}]},{title:"实体环境监管",formItmeList:[{label:"坦克",name:"Tank",rules:[{required:!0,message:"请输入坦克"}]},{label:"士兵",name:"Soldier",rules:[{required:!0,message:"请输入士兵"}]},{label:"直升机",name:"Helicopter",rules:[{required:!0,message:"请输入直升机"}]},{label:"战斗机",name:"FighterJet",rules:[{required:!0,message:"请输入战斗机"}]},{label:"火炮",name:"Artillery",rules:[{required:!0,message:"请输入火炮"}]},{label:"步兵战车",name:"InfantryFightingVehicle",rules:[{required:!0,message:"请输入步兵战车"}]},{label:" 无人机",name:"UAV",rules:[{required:!0,message:"请输入 无人机"}]},{label:"装甲车辆",name:"ArmoredVehicles",rules:[{required:!0,message:"请输入装甲车辆"}]},{label:"导弹车",name:"MissileVehicle",rules:[{required:!0,message:"请输入导弹车"}]},{label:"车辆",name:"Vehicles",rules:[{required:!0,message:"请输入车辆"}]},{label:" 飞机",name:"Airplane",rules:[{required:!0,message:"请输入飞机"}]},{label:"伪装网",name:"CamouflageNet",rules:[{required:!0,message:"请输入伪装网"}]}]},{title:"活动监管",formItmeList:[{label:"静默时间片数的阈值",name:"inactivity_threshold",rules:[{required:!0,message:"请输入静默时间片数的阈值"}]}]},{title:"属性监管",formItmeList:[{label:"实体数量的阈值",name:"entity_threshold",rules:[{required:!0,message:"请输入实体数量的阈值"}]}]}],i=[{title:"监管规则",dataIndex:"title",width:200},{title:"值",dataIndex:"value",render:(e,t,n)=>{let r={},l=!0;return t.valueKey.forEach((e=>{r[e]=t[e]})),Object.keys(r).forEach((e=>{null===r[e]&&(l=!1)})),h.jsx("span",{children:l?h.jsxs("span",{children:[JSON.stringify(r,null,2)," ",h.jsx("span",{children:h.jsx("span",{style:{color:"#0097FF",cursor:"pointer"},onClick:()=>{y(!0),A(n)},children:"编辑"})})]}):h.jsxs("span",{children:["暂无，进行",h.jsx("span",{style:{color:"#0097FF",cursor:"pointer"},onClick:()=>{y(!0),A(n)},children:"配置"})]})})}},{title:"说明",dataIndex:"description"},{title:"状态",dataIndex:"status",render:(e,t)=>{let n={},r=!0;return t.valueKey.forEach((e=>{n[e]=t[e]})),Object.keys(n).forEach((e=>{null===n[e]&&(r=!1)})),r?h.jsx(Y,{color:"green",children:"已启用"}):h.jsx(Y,{color:"red",children:"未配置"})}}],c=[{title:"位置监管",status:!1,wzlongitude:120.3168,wzlatitude:29.0982,radius:10,valueKey:["wzlongitude","wzlatitude","radius"]},{title:"区域监管",status:!1,qylongitude:120,qylatitude:29,temperature_threshold:120,valueKey:["qylongitude","qylatitude","temperature_threshold"]},{title:"实体环境监管",status:!1,Tank:"land",Soldier:"land",Helicopter:"air",FighterJet:"air",Artillery:"land",InfantryFightingVehicle:"land",UAV:"air",ArmoredVehicles:"land",MissileVehicle:"land",Vehicles:"land",Airplane:"air",CamouflageNet:"land",valueKey:["Tank","Soldier","Helicopter","FighterJet","Artillery","InfantryFightingVehicle","UAV","ArmoredVehicles","MissileVehicle","Vehicles","Airplane","CamouflageNet"],valueType:"string"},{title:"活动监管",status:!1,inactivity_threshold:10,valueKey:["inactivity_threshold"]},{title:"属性监管",status:!1,entity_threshold:10,valueKey:["entity_threshold"]}],[d,m]=a.useState(c),[u,A]=a.useState(0),[p,y]=a.useState(!1);return h.jsxs(h.Fragment,{children:[h.jsx(x,{onClick:()=>o(!0),children:"态势监管"}),h.jsxs(E,{open:l,footer:null,onCancel:()=>o(!1),children:[h.jsx(N,{rowKey:e=>e.title,columns:i,dataSource:d,pagination:!1}),h.jsx("div",{className:"button_content",style:{marginTop:36,display:"flex",justifyContent:"center"},children:h.jsxs(I,{size:40,children:[h.jsx(x,{type:"primary",style:{width:80,height:30,backgroundColor:"#E2EFFA",color:"#006BC3"},onClick:()=>{let r=[];d.forEach(((e,t)=>{let n={},l=!0;e.valueKey.forEach((t=>{n[t]=e[t]})),Object.keys(n).forEach((e=>{null===n[e]&&(l=!1)})),l&&r.push(e)})),r.length>0?n("/ruleSupervision",{state:{superviseData:r,fileData:e,situation:t}}):b.warning("请添加监管规则")},children:"一键监管"}),h.jsx(x,{onClick:()=>{o(!1)},type:"primary",style:{width:80,height:30,color:" rgba(0,0,0,0.4)",backgroundColor:"#EBEBEB"},children:"返回"})]})})]}),h.jsx(E,{title:s[u].title,open:p,onCancel:()=>{y(!1),A(0),r.resetFields(),m(c)},onOk:()=>r.submit(),width:600,children:h.jsx(C,{form:r,name:"basic1",style:{width:"100%"},autoComplete:"off",onFinish:e=>{let t;t=2!==u?function(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=Number(e[n]));return t}(e):e,d[u].valueKey.forEach((e=>{d[u][e]=t[e]})),d[u].status=!0,m([...d]),y(!1)},initialValues:{Tank:"land",Soldier:"land",Helicopter:"air",FighterJet:"air",Artillery:"land",InfantryFightingVehicle:"land",UAV:"air",ArmoredVehicles:"land",MissileVehicle:"land",Vehicles:"land",Airplane:"air",CamouflageNet:"land",qylongitude:120,qylatitude:29,wzlongitude:120.3168,wzlatitude:29.0982,temperature_threshold:120,radius:10,inactivity_threshold:10,entity_threshold:10},labelCol:{span:6},children:s[u].formItmeList.map(((e,t)=>h.jsx(C.Item,{name:e.name,label:e.label,rules:e.rules,children:h.jsx(v,{})},t)))})})]})}const R="_root_tfq65_1";function G({taishiInfo:e}){const t=[{icon:h.jsx("img",{style:{width:14,height:14},src:"/icon/End.png"}),name:"预测终点"},{icon:h.jsx(Q,{style:{color:"#0000ff"}}),name:"态势轨迹"},{icon:h.jsx(Q,{style:{color:"red"}}),name:"预测轨迹"}];return h.jsx("div",{className:R,children:h.jsxs("div",{className:"map_detail",children:[h.jsxs("div",{className:"map_detail_item_1",children:[h.jsx("div",{className:"title",children:"态势基本信息"}),h.jsx(j,{children:[{name:"态势编号：",content:"TS001",key:"createTime"},{name:"态势名称：",content:"未命名1",key:"name"},{name:"态势归属：",content:"湖北陆战场",key:"belong"},{name:"创建人：",content:"席x",key:"createUser"},{name:"态势创建时间:",content:"2023.12.07 16:24",key:"createTime"}].map(((t,n)=>h.jsx(k,{span:4==n||0==n?24:12,children:h.jsxs("div",{className:"jb_item",children:[h.jsx("span",{className:"name",children:t.name}),h.jsx("span",{className:"content",children:4==n?w(e[t.key]).format("YYYY-MM-DD HH:mm:ss"):e[t.key]})]},n)},n)))}),h.jsx("div",{style:{marginTop:60},className:"title",children:"战场环境态势"}),h.jsx(j,{children:[{name:"电磁环境：",content:"中等强度"},{name:"战场气象：",content:"晴朗"},{name:"战场地貌：",content:"平原"},{name:"海拔高度：",content:"219米"}].map(((e,t)=>h.jsx(k,{span:12,children:h.jsxs("div",{className:"jb_item",children:[h.jsx("span",{className:"name",children:e.name}),h.jsx("span",{className:"content",children:e.content})]})},t)))})]}),h.jsxs("div",{className:"map_detail_item_2",children:[h.jsx("div",{className:"title",children:"战场环境态势"}),h.jsx(j,{children:t.map(((e,t)=>h.jsx(k,{span:12,children:h.jsxs("div",{className:"tl_item",children:[h.jsx("div",{className:"icon",children:e.icon}),h.jsx("div",{className:"name",children:e.name})]},t)},t)))})]})]})})}export{G as B,D as G,W as S,H as g,_ as r};
