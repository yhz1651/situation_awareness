import{r as e,j as s,u as a,a as t,S as n}from"./index-BHzTjgdo.js";import{g as i,i as l,u as r,a as o,b as d,c,d as m,e as u,f as x,h,j}from"./installCanvasRenderer--QmpqVAe.js";import{r as p,g as f,G as y,S as g,B as v}from"./index-Di44d5Sh.js";import{M as S}from"./index-DJDkQNUc.js";import{T as E,g as N}from"./situation-DgN_xpIM.js";import{S as k}from"./index-CTlTgMjl.js";import{B as b,L as C}from"./request-BdSZPrdh.js";import{M as w}from"./index-D-Niv0xz.js";import{S as _}from"./index-CcU0Nfwo.js";import"./assessment-B8y50_jM.js";import"./index-DbH9RyqW.js";import"./EyeOutlined-DPMoqjW0.js";import"./index-De03Z11V.js";import"./Tile-B_8rgVKG.js";const I="_root_e1q1j_1";function D({LieStackData:a}){const t=e.useRef(),n={color:["#FE9A01","#00CB78","#77E9FF"],legend:{data:a.lineStackLegendData},grid:{left:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.lineStackXaxisData,name:a.Xname||"",axisLabel:{margin:16},nameGap:10},yAxis:{type:"value",max:a.max||null,name:a.Yname||"",nameGap:10,offset:a.yAxisoffset||null,nameTextStyle:{shadowOffsetX:30}},series:a.lineStackSeriesData};return e.useEffect((()=>{let e=i(t.current);null==e&&(e=l(t.current)),e.setOption(n)})),s.jsx("div",{style:{height:220},ref:t})}function L({LieStackData:e,showEvaluation:a,setShowEvaluation:t}){const n=()=>{t(!1)},i=[];for(let l=0;l<4;l++)i.push({key:l,name:"局部战力优势",age:"x"+(11+10*l),address:l<2?s.jsxs("span",{children:["x",12+10*l,s.jsx("img",{style:{marginLeft:15},src:p,alt:""})]}):s.jsxs("span",{children:["x",12+10*l,s.jsx("img",{style:{marginLeft:15},src:f,alt:""})]})});return s.jsxs(S,{width:440,wrapClassName:"Evaluation",open:a,onOk:()=>{t(!1)},onCancel:n,footer:null,closeIcon:!1,children:[s.jsx("div",{className:"title",children:"量化评估"}),s.jsxs("div",{className:"Evaluation_content",children:[s.jsx(D,{LieStackData:e}),s.jsx(E,{pagination:!1,dataSource:i,columns:[{title:"指标",dataIndex:"name",key:"name"},{title:"敌方",dataIndex:"age",key:"age"},{title:"我方",dataIndex:"address",key:"address"}]}),s.jsx("div",{className:"button_content",children:s.jsxs(k,{size:40,children:[s.jsx(b,{type:"primary",style:{width:80,height:30,backgroundColor:"#E2EFFA",color:"#006BC3"},children:"导出"}),s.jsx(b,{onClick:n,type:"primary",style:{width:80,height:30,color:" rgba(0,0,0,0.4)",backgroundColor:"#EBEBEB"},children:"返回"})]})})]})]})}function B({LieStackData:a,showSuperbiseResoult:t,setShowSuperbiseResoult:n}){const i=()=>{n(!1)},l=[];for(let e=0;e<4;e++)l.push({key:e,name:"环境异常监管告警",age:16,address:"424954, 834794",code:s.jsx("span",{style:{color:"red"},children:"'W101：禁入区域'"})});e.useState([]);return s.jsxs(S,{width:1194,wrapClassName:"Evaluation",open:t,onOk:()=>{n(!1)},onCancel:i,footer:null,closeIcon:!1,children:[s.jsx("div",{className:"title",children:"态势监管结果"}),s.jsx("div",{className:"list_content",children:[{name:"态势编号：TS001"},{name:"态势名称：未命名1"},{name:"态势归属：湖北陆战场"},{name:"创建人：席x"},{name:"创建时间：2023.12.07 16:2"}].map(((e,a)=>s.jsx(k,{size:50,children:s.jsx("div",{className:"list_item",children:e.name})},a)))}),s.jsxs("div",{className:"Evaluation_content",children:[s.jsx(D,{LieStackData:a}),s.jsx("div",{className:"table_content",children:s.jsx(E,{pagination:!1,dataSource:l,columns:[{title:"监管结果",dataIndex:"name",key:"name"},{title:"时间戳",dataIndex:"age",key:"age"},{title:"坐标",dataIndex:"address",key:"address"},{title:"警告代码",dataIndex:"code",key:"code"}]})}),s.jsx("div",{className:"button_content",children:s.jsxs(k,{size:40,children:[s.jsx(b,{type:"primary",style:{width:80,height:30,backgroundColor:"#E2EFFA",color:"#006BC3"},children:"结果反馈"}),s.jsx(b,{onClick:i,type:"primary",style:{width:80,height:30,color:" rgba(0,0,0,0.4)",backgroundColor:"#EBEBEB"},children:"返回"})]})})]})]})}function A(){a();const{fileAddress:i,taishiInfo:l}=t()?.state||{fileAddress:null,taishiInfo:null},[r,o]=e.useState({}),{setLoading:d,loading:c,fileData:m,coordinates:u,entityData:x,entityIndex:h,setEntityIndex:j,currentEntity:p,setTaishiNmame:f,taishiNmame:S,currentTimeEntity:E,setCurrentTimeEntity:b,currentTimeIndex:D,setCurrentTimeIndex:A,setCurrentEntity:T}=y(),[F,z]=e.useState(1),[R,O]=e.useState({}),[G,V]=e.useState([]);e.useEffect((()=>{(async()=>{const{data:e}=await N();O(e.data.records[0]);let s=[];for(let a=0;a<e.data.records.length;a++){const t=e.data.records[a];s.push({key:a,value:t.fileAddress,label:t.name,...t})}V(s),i?(f(i),o(l)):(f(s[0].value),o(s[0]))})(),f(i),d(!1)}),[i]);const[X,q]=e.useState(!1),[M,W]=e.useState(!1);e.useState(!1);const[Y,H]=e.useState([]),[J,K]=e.useState([]),[P,Q]=e.useState([]);return s.jsxs("div",{className:I,children:[s.jsxs("div",{className:"Compute_content",children:[s.jsxs("div",{className:"Compute_header",children:[s.jsx("div",{className:"left",children:s.jsxs(k,{size:30,children:[s.jsxs("div",{className:"select",children:[s.jsx("span",{className:"select_title",children:"选择态势："}),s.jsx(_,{placeholder:"请选择",onChange:e=>{f(e);let s=G.filter((s=>s.fileAddress==e));o(s[0])},options:G,style:{width:120}})]}),s.jsxs("div",{className:"select",children:[s.jsx("span",{className:"select_title",children:"显示方式："}),s.jsx(_,{value:F,onChange:e=>{z(e),T([u[0]]),b(m[0].entities),A([0]),j([0])},options:[{value:0,label:"时间切片"},{value:1,label:"运动轨迹"}],style:{width:120}})]}),0===F&&s.jsxs("div",{className:"select",children:[s.jsx("span",{className:"select_title",children:"时间选择："}),s.jsx(_,{defaultValue:D,onChange:e=>{A(e),b(m[e].entities)},options:m.map(((e,s)=>({label:e.time,value:s}))),style:{width:120}})]}),1===F&&s.jsxs("div",{className:"select",children:[s.jsx("span",{className:"select_title",children:"实体选择："}),s.jsx(_,{mode:"multiple",defaultValue:h,onChange:e=>{j(e);let s=[];for(let a=0;a<e.length;a++)s.push(u[e[a]]);T(s)},options:x.map(((e,s)=>({label:e[0].name,value:s}))).filter((e=>"Virtual"!==e.label?.substring(0,7))),style:{width:300}})]})]})}),s.jsx("div",{className:"right",children:s.jsx(k,{size:30,children:s.jsx(g,{situation:R,fileData:m})})})]}),s.jsxs("div",{className:"map",children:[s.jsx(n,{spinning:c,indicator:s.jsx(C,{spin:!0}),size:"large",children:s.jsx("div",{className:"map_content",children:s.jsx(w,{predictData:1==F?Y:null,coordinates:1==F?p:null,currentTimeEntity:0==F?E:null,abnormalData:0==F?J:null,generateData:1==F?P:null})})}),s.jsx(v,{taishiInfo:r})]})]}),s.jsx(L,{showEvaluation:X,setShowEvaluation:q}),s.jsx(B,{showSuperbiseResoult:M,setShowSuperbiseResoult:W})]})}r([o,d,c,m,u,x,h,j]);export{A as default};
